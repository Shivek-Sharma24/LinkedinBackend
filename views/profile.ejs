<% include ./partials/header.ejs  %>
<div class="profile w-full min-h-screen bg-zinc-800 text-white pt-1">
<!-- //start first div -->
<form hidden id="uploadform" action="/fileupload"  method="post" enctype="multipart/form-data">
  <input type="file" name="profileimage" id="">
</form>
  <div class="profdets flex flex-col items-center mt-10 ">
<div class="relative">

  <span id="uploadprofile" class="absolute bottom-0 right-0 w-10 h-10 bg-zinc-200 rounded-full flex items-center justify-center cursor-pointer">
    <i class="ri-edit-2-fill text-zinc-800 text-lg"></i>
  </span>
  <div class="w-40 h-40 bg-zinc-200 rounded-full overflow-hidden">
    <img src="/images/<%=user.profileimage %>" alt="" class="w-full h-full object-cover">   
      </div>

</div>

    <h1 class="text-3xl font-semibold mt-3"><%= user.username %></h1>
    <h3 class="text-xl"><%= user.email %></h3>
    <div class="flex gap-5">
    <a href="/edit" class="px-7 py-2 mt-3 max-h-[2.5rem]  bg-zinc-600 rounded-full text-md font-semibold">Edit</a>
     <a href="/add" 
     class="inline-flex items-center mt-3 max-h-[2.5rem]
      px-4 py-2 bg-indigo-500 hover:bg-indigo-600 text-white text-sm font-medium rounded-md">
      Add Post
    </a>

  </div>
  </div>


  <div class="cards flex flex-wrap gap-10 px-5  mt-10">
   
   <% user.posts.forEach(function(post , index){ %>

    <div class="card">
      
      <div class="bg-zinc-200 h-40 w-52 rounded-md overflow-hidden">
        <img src="/images/<%=post.postimage %>" alt="" class=" object-cover  w-full h-full">
      </div>
      <h3 class="text-xl font-semibold mt-3"><%= post.title %></h3>
      <h5 class="font-semibold text-lg opacity-60">this is <%= user.username %> Post. </h5>

      <a href="/delete/<%= post._id %>" class="inline-flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
        </svg>
      
        Delete Post
      </a>

      <!-- <a href="/delete/<%= post._id %>" class="bg-red-600 px-5 py-3 rounded-lg mt-5 text-sm font-medium rounded-lg">DeletePost</a> -->

        
      
      </div>
  <% }) %>
    
  </div>

  <!-- first div end -->

</div>
<script>

  document.querySelector("#uploadprofile").addEventListener("click" , function(){
    document.querySelector("#uploadform input").click();
  })

  document.querySelector("#uploadform input").addEventListener("change" , function(){
    document.querySelector("#uploadform").submit();
  })
</script>

<% include ./partials/footer.ejs  %>